REPLACE_OR_CREATE:fix_variable_error = {
    if = {
        limit = {has_variable = $variable$ var:$variable$ = flag:$variable$ exists = scope:$variable$ scope:$variable$ = flag:$variable$}
        set_variable = {name = $variable$ value = flag:$variable$} flag:$variable$ = {save_scope_as = $variable$}
    }
}

add_com_dlc_icon = {
    set_variable = {
        name = com_dlc
        value = flag:$dlc$
    }
    fix_variable_error = { variable = $dlc$ }
}

set_com_character_animation = {
    set_variable = {
        name = com_character_animation
        value = flag:$animation$
    }
	fix_variable_error = { variable = $animation$ }
}

set_com_character_camera = {
    set_variable = {
        name = com_character_camera
        value = flag:$camera$
    }
	fix_variable_error = { variable = $camera$ }
}

set_com_character_environment = {
    set_variable = {
        name = com_character_environment
        value = flag:$environment$
    }
	fix_variable_error = { variable = $environment$ }
}

set_com_character_portrait = {
    set_com_character_animation = { animation = $animation$ }
    set_com_character_camera = { camera = $camera$ }
    set_com_character_environment = { environment = $environment$ }
}

set_com_character_portrait_everywhere = {
    set_variable = {
        name = com_character_override
    }
	fix_variable_error = { variable = com_character_override }
    set_com_character_animation = { animation = $animation$ }
    set_com_character_camera = { camera = $camera$ }
    set_com_character_environment = { environment = $environment$ }
}

remove_com_character_portrait = {
    remove_variable = com_character_override
    remove_variable = com_character_animation
    remove_variable = com_character_camera
    remove_variable = com_character_environment
}